/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * RouteDetailsPanelView.java
 *
 * Created on 07-dic-2011, 0:20:45
 */
package hidrocon.ui.route.details;

import hidrocon.HidroconView;
import hidrocon.core.database.route.entities.Route;
import hidrocon.core.utils.ActionKey;
import hidrocon.custom.Constant;
import hidrocon.custom.button.toolbar.HidroEditButton;
import hidrocon.custom.button.toolbar.HidroExitButton;
import hidrocon.custom.button.toolbar.HidroSaveButton;
import hidrocon.custom.panel.HidroMainPanel;
import java.awt.event.ActionListener;

/**
 *
 * @author David SÃ¡enz Tagarro
 */
public class RouteDetailsPanelView extends HidroMainPanel {

    int mode;
    
    private HidroEditButton editButton;
    private HidroSaveButton saveButton;
    private HidroExitButton exitButton;
    
    /** Creates new form RouteDetailsPanelView */
    public RouteDetailsPanelView() {
        initComponents();
        initTopPanel();
    }
    
	protected void initTopPanel() {
		org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(hidrocon.HidroconApp.class).getContext().getResourceMap(HidroconView.class);
		topPanel.setTitle("  " + resourceMap.getString("route.details.toppanel.title"));

        editButton = new HidroEditButton();
		saveButton = new HidroSaveButton();
        exitButton = new HidroExitButton();
        
        saveButton.setToolTipText(resourceMap.getString("route.toolbar.editbutton.tooltip"));
		saveButton.setToolTipText(resourceMap.getString("route.toolbar.savebutton.tooltip"));
        exitButton.setToolTipText(resourceMap.getString("route.toolbar.exitbutton.tooltip"));

        topPanel.addButton(editButton);
		topPanel.addButton(saveButton);
        topPanel.addButton(exitButton);
	}
    
    public void setMode(int mode) {
        this.mode = mode;
        if (this.mode == Constant.ENTITY_MANAGEMENT_MODE_CREATION) {
            enableAllFields(true);
        }
        else if (this.mode == Constant.ENTITY_MANAGEMENT_MODE_VIEW) {
            enableAllFields(false);
        }   
        else if (this.mode == Constant.ENTITY_MANAGEMENT_MODE_UPDATE) {
            enableAllFields(true);
            routeNumberField.requestFocusInWindow();
        }        
        else if (this.mode == Constant.ENTITY_MANAGEMENT_MODE_SUMMARY) {
            enableAllFields(false);
        }
        
        showButtons();
    }
    
    protected void showButtons() {
        if (mode == Constant.ENTITY_MANAGEMENT_MODE_CREATION) {
            editButton.setVisible(false);
            saveButton.setVisible(true);
        }
        else if (mode == Constant.ENTITY_MANAGEMENT_MODE_SUMMARY) {
            editButton.setVisible(false);
            saveButton.setVisible(false);
        }
        else if (mode == Constant.ENTITY_MANAGEMENT_MODE_VIEW ) {
            editButton.setVisible(true);
            saveButton.setVisible(false);
        }        
        else if (mode == Constant.ENTITY_MANAGEMENT_MODE_UPDATE ) {
            editButton.setVisible(false);
            saveButton.setVisible(true);
        }                
    }

    public void enableAllFields(boolean enabled) {
        routeNumberField.setEditable(enabled);
        routeNameField.setEditable(enabled);
        numberReadingsPerYearField.setEditable(enabled);
    }
    
    public void writeData(Route route) {
        //routeNumberField.setValue(route.getRouteNumber());
        routeNameField.setText(route.getRouteName());
    }
    
    public void readData(Route route) {
        //route.setRouteNumber(routeNumberField.getValue());
        route.setRouteName(routeNameField.getText());
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        topPanel = new hidrocon.custom.panel.HidroTopPanel();
        mainPanel = new hidrocon.custom.panel.HidroMainPanel();
        routeNameLabel = new hidrocon.custom.label.HidroLabel();
        routeNameField = new hidrocon.custom.field.HidroTextField();
        numberReadingsPerYearLabel = new hidrocon.custom.label.HidroLabel();
        numberReadingsPerYearField = new hidrocon.custom.field.HidroIntegerField();
        routeNumberLabel = new hidrocon.custom.label.HidroLabel();
        routeNumberField = new hidrocon.custom.field.HidroIntegerField();

        setMinimumSize(new java.awt.Dimension(100, 100));
        setName("Form"); // NOI18N
        setLayout(new java.awt.BorderLayout());

        topPanel.setName("topPanel"); // NOI18N
        add(topPanel, java.awt.BorderLayout.PAGE_START);

        mainPanel.setName("mainPanel"); // NOI18N
        mainPanel.setOpaque(false);
        mainPanel.setPreferredSize(new java.awt.Dimension(475, 180));

        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(hidrocon.HidroconApp.class).getContext().getResourceMap(RouteDetailsPanelView.class);
        routeNameLabel.setText(resourceMap.getString("routeNameLabel.text")); // NOI18N
        routeNameLabel.setName("routeNameLabel"); // NOI18N

        routeNameField.setName("routeNameField"); // NOI18N

        numberReadingsPerYearLabel.setText(resourceMap.getString("numberReadingsPerYearLabel.text")); // NOI18N
        numberReadingsPerYearLabel.setName("numberReadingsPerYearLabel"); // NOI18N

        numberReadingsPerYearField.setName("numberReadingsPerYearField"); // NOI18N

        routeNumberLabel.setText(resourceMap.getString("routeNumberLabel.text")); // NOI18N
        routeNumberLabel.setName("routeNumberLabel"); // NOI18N

        routeNumberField.setText(resourceMap.getString("routeNumberField.text")); // NOI18N
        routeNumberField.setName("routeNumberField"); // NOI18N

        javax.swing.GroupLayout mainPanelLayout = new javax.swing.GroupLayout(mainPanel);
        mainPanel.setLayout(mainPanelLayout);
        mainPanelLayout.setHorizontalGroup(
            mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addComponent(routeNameLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(routeNameField, javax.swing.GroupLayout.PREFERRED_SIZE, 360, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addComponent(numberReadingsPerYearLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(numberReadingsPerYearField, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addComponent(routeNumberLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(routeNumberField, javax.swing.GroupLayout.PREFERRED_SIZE, 73, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(14, Short.MAX_VALUE))
        );
        mainPanelLayout.setVerticalGroup(
            mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainPanelLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(routeNumberLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(routeNumberField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(routeNameLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(routeNameField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(numberReadingsPerYearLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(numberReadingsPerYearField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(75, Short.MAX_VALUE))
        );

        add(mainPanel, java.awt.BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private hidrocon.custom.panel.HidroMainPanel mainPanel;
    private hidrocon.custom.field.HidroIntegerField numberReadingsPerYearField;
    private hidrocon.custom.label.HidroLabel numberReadingsPerYearLabel;
    private hidrocon.custom.field.HidroTextField routeNameField;
    private hidrocon.custom.label.HidroLabel routeNameLabel;
    private hidrocon.custom.field.HidroIntegerField routeNumberField;
    private hidrocon.custom.label.HidroLabel routeNumberLabel;
    private hidrocon.custom.panel.HidroTopPanel topPanel;
    // End of variables declaration//GEN-END:variables

    public void buttonActionListeners(ActionListener al) {
        editButton.setActionCommand(ActionKey.ROUTE_DETAILS_EDIT);
		editButton.addActionListener(al);
        saveButton.setActionCommand(ActionKey.ROUTE_DETAILS_SAVE);
        saveButton.addActionListener(al);        
		exitButton.setActionCommand(ActionKey.ROUTE_DETAILS_CLOSE);
        exitButton.addActionListener(al);
    }
    
}

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * InvoiceReadingPanelView.java
 *
 * Created on 25-dic-2011, 6:39:12
 */
package hidrocon.invoice.meterreading.details;

import hidrocon.HidroconView;
import hidrocon.core.database.neighbourmeterreading.entities.NeighbourMeterReadingView;
import hidrocon.core.generic.pattern.mvc.HidroController;
import hidrocon.custom.Constant;
import hidrocon.custom.button.section.HidroSaveButton;
import hidrocon.custom.button.toolbar.HidroEditButton;
import hidrocon.custom.panel.HidroMainPanel;
import hidroconfx.invoice.InvoiceReadingFXView;
import java.util.ArrayList;
import java.util.List;
import javafx.application.Platform;
import javafx.embed.swing.JFXPanel;
import javafx.scene.Scene;
import javafx.scene.paint.Color;

/**
 *
 * @author David SÃ¡enz Tagarro
 */
public class InvoiceReadingPanelView extends HidroMainPanel {

    HidroEditButton editButton;
    HidroSaveButton saveButton;
    
    private InvoiceReadingFXView invoiceReadingFXView;
    
    /** Creates new form InvoiceReadingPanelView */
    public InvoiceReadingPanelView() {
        initComponents();
        initTopPanel();
        customizeComponents();
    }

    private void customizeComponents() {
		org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(hidrocon.HidroconApp.class).getContext().getResourceMap(HidroconView.class);
        //containerScrollPane.addComponentListener(this);
        //Sections:
        //Details 2 panel:
        //neighbourMeterReadingSection.setImageIcon(new HidroRouteMapLegend());
        
        /* Put the JavaFX scene in the middle */
        invoiceReadingFXView = new InvoiceReadingFXView();
        final JFXPanel fxPanel = new JFXPanel();
        mainPanel.add(fxPanel, java.awt.BorderLayout.CENTER);
        
        /* Construct the JavaFX scene on its own application thread */
        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                Scene scene = new Scene(invoiceReadingFXView, 200, 100);
                scene.setFill(Color.web("#d8e0ea"));
                fxPanel.setScene(scene);
            }
        });        
    }
    
	private void initTopPanel() {
		org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(hidrocon.HidroconApp.class).getContext().getResourceMap(HidroconView.class);
		topPanel.setTitle("  " + resourceMap.getString("neighbour.details.toppanel.title"));
		
		/*editButton = new HidroEditButton();
		saveButton = new HidroSaveButton();
		exitButton = new HidroExitButton();
        		
		editButton.setToolTipText(resourceMap.getString("neighbourmeter.details.toolbar.editbutton.tooltip"));
		saveButton.setToolTipText(resourceMap.getString("neighbourmeter.details.toolbar.savebutton.tooltip"));
        
		topPanel.addButton(editButton);
		topPanel.addButton(saveButton);
        topPanel.addButton(exitButton); */
        
        //arrowRightButton.setVisible(true);
	}
    
    public void writeData(List neighbourMeterReadingList) {
        this.neighbourMeterReadingList.clear();
        this.neighbourMeterReadingList.addAll(neighbourMeterReadingList);
    }    

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        neighbourMeterReadingList = org.jdesktop.observablecollections.ObservableCollections.observableList(new ArrayList<NeighbourMeterReadingView>());
        topPanel = new hidrocon.custom.panel.HidroTopPanel();
        mainPanel = new hidrocon.custom.panel.HidroPanel();
        leftFiller = new javax.swing.Box.Filler(new java.awt.Dimension(25, 25), new java.awt.Dimension(25, 25), new java.awt.Dimension(25, 32767));
        rightFiller = new javax.swing.Box.Filler(new java.awt.Dimension(25, 0), new java.awt.Dimension(25, 0), new java.awt.Dimension(25, 32767));
        bottomFiller = new javax.swing.Box.Filler(new java.awt.Dimension(0, 25), new java.awt.Dimension(0, 25), new java.awt.Dimension(32767, 10));
        topFiller = new javax.swing.Box.Filler(new java.awt.Dimension(0, 25), new java.awt.Dimension(0, 25), new java.awt.Dimension(32767, 25));

        setName("Form"); // NOI18N
        setLayout(new java.awt.BorderLayout());

        topPanel.setMaximumSize(new java.awt.Dimension(580, 35));
        topPanel.setName("topPanel"); // NOI18N
        add(topPanel, java.awt.BorderLayout.PAGE_START);

        mainPanel.setMaximumSize(new java.awt.Dimension(560, 575));
        mainPanel.setMinimumSize(new java.awt.Dimension(560, 575));
        mainPanel.setName("mainPanel"); // NOI18N
        mainPanel.setPreferredSize(new java.awt.Dimension(560, 575));
        mainPanel.setRequestFocusEnabled(false);
        mainPanel.setLayout(new java.awt.BorderLayout());

        leftFiller.setName("leftFiller"); // NOI18N
        mainPanel.add(leftFiller, java.awt.BorderLayout.WEST);

        rightFiller.setName("rightFiller"); // NOI18N
        mainPanel.add(rightFiller, java.awt.BorderLayout.EAST);

        bottomFiller.setName("bottomFiller"); // NOI18N
        mainPanel.add(bottomFiller, java.awt.BorderLayout.SOUTH);

        topFiller.setName("topFiller"); // NOI18N
        mainPanel.add(topFiller, java.awt.BorderLayout.PAGE_START);

        add(mainPanel, java.awt.BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.Box.Filler bottomFiller;
    private javax.swing.Box.Filler leftFiller;
    private hidrocon.custom.panel.HidroPanel mainPanel;
    private java.util.List<NeighbourMeterReadingView> neighbourMeterReadingList;
    private javax.swing.Box.Filler rightFiller;
    private javax.swing.Box.Filler topFiller;
    private hidrocon.custom.panel.HidroTopPanel topPanel;
    // End of variables declaration//GEN-END:variables
    
    public void addController(HidroController controller) {
        invoiceReadingFXView.setSwingUI(controller);
    }

}
